---
import { getEntry } from "astro:content";
import { render } from "astro:content";

const aboutEntry = await getEntry("about", "about");
// Check if there is actual content (excluding comments)
const hasContent = aboutEntry?.body
    ? aboutEntry.body.replace(/<!--[\s\S]*?-->/g, "").trim().length > 0
    : false;
const { Content } =
    hasContent && aboutEntry ? await render(aboutEntry) : { Content: null };
---

{
    hasContent && Content && (
        <div class="about prose">
            <Content />
        </div>
    )
}

<style is:global>
    .about:not(:empty) {
        margin-bottom: 1.25rem;
        /* margin-top: -4.5rem; */
    }
    .about.prose p {
        line-height: 1.0;
        margin: 0.5rem 0;
    }
    .about.prose h1,
    .about.prose h2,
    .about.prose h3 {
        font-size: calc(1rem + 0.6vw); /* tweak per level */
        margin-bottom: 0.45rem;
        margin-top: 01.0rem;
    }

    .about.prose ul,
    .about.prose ol {
        margin: 0.5rem 0 0.5rem 1.25rem;
        padding-left: 0.5rem;
    }

    .about.prose li {
        margin-bottom: 0.25rem;
        position: relative;
    }

    .about.prose .about-year {
        float: right;
        min-width: 5rem;
        text-align: right;
        font-weight: 400;
        margin-left: 0.5rem;
        white-space: nowrap;
    }

    .about.prose p::after,
    .about.prose li::after {
        content: "";
        display: block;
        clear: both;
    }

    .about.prose .about-spacer {
        display: block;
        width: 100%;
        height: 1rem;
        pointer-events: none;
    }

    .about.prose .about-spacer-md {
        height: 0.3rem;
    }

    .about.prose .about-spacer-lg {
        height: 2rem;
    }
</style>
